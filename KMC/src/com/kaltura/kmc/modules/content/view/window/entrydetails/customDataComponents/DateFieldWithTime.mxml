<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
		 xmlns:controls="com.kaltura.controls.*"
		 verticalAlign="middle" creationComplete="onCreationComplete()"
		 paddingBottom="0" paddingTop="0">
	<mx:Script>
		<![CDATA[
			import com.kaltura.utils.DateFieldWithTimeStepperLogic;
			
			import mx.binding.utils.BindingUtils;
			
			private var _timeManager:DateFieldWithTimeStepperLogic;
			
			[Bindable]
			public var selectedDate:Date;
			private var _yearNavigationEnabled:Boolean;

			[Bindable]
			public function get yearNavigationEnabled():Boolean
			{
				return _yearNavigationEnabled;
			}

			public function set yearNavigationEnabled(value:Boolean):void
			{
				_yearNavigationEnabled = value;
			}

			private function onCreationComplete():void {
				_timeManager = new DateFieldWithTimeStepperLogic(dateField, null, dateTime, null);
				if (selectedDate) {
					_timeManager.setTime(dateTime, selectedDate.hours, selectedDate.minutes);
					dateField.selectedDate = selectedDate;
				}
			}
			
			private function updateSelectedDate():void {
				if (!dateField.selectedDate)
					return;
				
				var seconds:int = 0;
				seconds += dateField.selectedDate.time / 1000;
				seconds += _timeManager.calculateTime(dateTime.timeValue, dateTime.am_pm);
				if (!selectedDate)
					selectedDate = new Date();
				selectedDate.time = seconds * 1000;
				
			}

		]]>
	</mx:Script>
	<mx:DateField id="dateField" height="{this.height}" 
				  enabled="{this.enabled}" editable="true" change="{updateSelectedDate()}" yearNavigationEnabled="{yearNavigationEnabled}"/> 
	<controls:TimeStepper id="dateTime" height="{this.height}" showAMPMLabel="true" showHours="true"
						   styleName="timeEntry" enabled="{this.enabled}" change="{updateSelectedDate()}"/>
</mx:HBox>
