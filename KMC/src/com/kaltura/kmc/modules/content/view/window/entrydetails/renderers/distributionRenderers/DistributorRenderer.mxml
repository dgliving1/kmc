<?xml version="1.0" encoding="utf-8"?>
<mx:LinkButton xmlns:mx="http://www.adobe.com/2006/mxml" click="buttonClickHandler(event)" textAlign="left" paddingLeft="6">
	<mx:Script>
		<![CDATA[
			import com.kaltura.kmc.modules.content.model.EntryDistributionWithProfile;
			import com.kaltura.kmc.modules.content.view.window.entrydetails.popupWindows.DistributionDetailsWindow;
			import com.kaltura.vo.KalturaDistributionProfile;
			
			import mx.core.Application;
			import mx.managers.PopUpManager;
			
			private var _distributionProfile:KalturaDistributionProfile;
			private var _distribution:EntryDistributionWithProfile;
			private var _distributionDetailsWindow:DistributionDetailsWindow;
			
			override public function set data(value:Object):void {
				_distribution = value as EntryDistributionWithProfile;
				_distributionProfile = _distribution.kalturaDistributionProfile;
				this.label = _distributionProfile.name;
			}

			private function buttonClickHandler(event:MouseEvent):void
			{
				_distributionDetailsWindow = new DistributionDetailsWindow();
				_distributionDetailsWindow.entryDetailsModel = parentDocument.entryDetailsModel;
				_distributionDetailsWindow.entryDis = _distribution;
				_distributionDetailsWindow.addEventListener(DistributionDetailsWindow.WINDOW_CLOSE, closeDistributionDetailsWindow);
				PopUpManager.addPopUp(_distributionDetailsWindow, (Application.application as DisplayObject), true);
				PopUpManager.centerPopUp(_distributionDetailsWindow);  
			}
			
			private function closeDistributionDetailsWindow(event:Event):void {
				_distributionDetailsWindow.removeEventListener(DistributionDetailsWindow.WINDOW_CLOSE, closeDistributionDetailsWindow);
				PopUpManager.removePopUp(_distributionDetailsWindow);
				_distributionDetailsWindow = null;
			}

		]]>
	</mx:Script>
	
</mx:LinkButton>
